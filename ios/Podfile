# 1) Define la ruta al SDK de Flutter
def flutter_root
  ENV['FLUTTER_ROOT'] || raise("FLUTTER_ROOT no encontrado")
end

# 2) Carga el helper que define flutter_install_all_ios_pods y flutter_post_install
require File.expand_path(
  File.join(flutter_root, 'packages', 'flutter_tools', 'bin', 'podhelper'),
  __FILE__
)

# 3) Hook de configuración estándar de Flutter
flutter_ios_podfile_setup

# 4) Ya puedes declarar tu plataforma y target
platform :ios, '16.0'
ENV['COCOAPODS_DISABLE_STATS'] = 'true'

target 'Runner' do
  use_frameworks!
  use_modular_headers!

  # Aquí instalas los pods de tus plugins
  flutter_install_all_ios_pods(__dir__)
end

# 5) Y por último el post_install
post_install do |installer|
  flutter_post_install(installer)
end
